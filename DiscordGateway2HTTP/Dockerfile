FROM node:19
ARG APPLICATION_VERSION
WORKDIR /application

COPY package.json ./
RUN npm install
COPY . .

ENV SHARD_INDEX=auto
ENV SHARD_COUNT=auto
ENV PORT=8080

ENV SERVICE_NAME="Philbot Discord Gateway 2 HTTP"
ENV SERVICE_VERSION=$APPLICATION_VERSION
CMD exec node discordgateway2http.js

EXPOSE 8080
